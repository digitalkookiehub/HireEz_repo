<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HireEZ.AI</title>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // Auto-reload on stale chunks after deploy
      var RELOAD_KEY = 'chunk_reload';
      function forceReload() {
        var count = parseInt(sessionStorage.getItem(RELOAD_KEY) || '0', 10);
        if (count < 2) {
          sessionStorage.setItem(RELOAD_KEY, String(count + 1));
          window.location.reload(true);
        }
      }
      // Catch JS/module load errors
      window.addEventListener('error', function(e) {
        var msg = e.message || '';
        var tag = e.target && e.target.tagName;
        if (tag === 'SCRIPT' || tag === 'LINK') { forceReload(); return; }
        if (msg.includes('Failed to fetch') || msg.includes('MIME type') || msg.includes('module script')) { forceReload(); }
      }, true);
      window.addEventListener('unhandledrejection', function(e) {
        var msg = e.reason && (e.reason.message || String(e.reason)) || '';
        if (msg.includes('Failed to fetch') || msg.includes('module')) { forceReload(); }
      });
      // Fallback: if root is empty after 5s, reload
      setTimeout(function() {
        var root = document.getElementById('root');
        if (root && root.children.length === 0) { forceReload(); }
      }, 5000);
      // Clear flag on successful render
      window.addEventListener('load', function() { sessionStorage.removeItem(RELOAD_KEY); });
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
